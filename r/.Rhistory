}
lv3 <- run_huge(eta, names(eta), .3)
lv45 <- run_huge(eta, names(eta),.45)
lv6 <- run_huge(eta, names(eta),.6)
arrange(sentdf[mu*mu0 < 0 & epa == 'e'],-abs(scale(mu)-scale(mu0)))
arrange(sentdf[mu*mu0 < 0 & epa == 'p'],-abs(scale(mu)-scale(mu0)))
arrange(sentdf[mu*mu0 < 0 & epa == 'a'],-abs(scale(mu)-scale(mu0)))
results <- read.csv("NEWEST_RES/results.tsv")
results
results <- read.csv("NEWEST_RES/results.tsv",header=F,sep="\t")
results
setnames(results,c("iter","model","perpl","rank"))
results
results[rank == 0]
setnames(results,c("iter","model","perpl","rankv"))
results[rankv == 0]
results
results <- fread("NEWEST_RES/results.tsv",header=F,sep="\t")
setnames(results,c("iter","model","perpl","rank"))
results[rank == 0]
results[rank == 0,mean("perpl"),by="model"]
results[rank == 0,mean(perpl),by="model"]
assoc <- results[rank == 0,mean("perpl"),by="model"]
assoc
assoc <- results[rank == 0,mean(perpl),by="model"]
assoc[model=='user_assoc']$V1
uv <- assoc[model=='user_assoc']$V1
ov <- assoc[model=="our_assoc"]$V1
(ov-uv)/uv
results[rank != 0,mean(perpl),by="model"]
results[rank != 0,mean(rank),by="model"]
sent <- results[rank != 0,mean(rank),by="model"]
uv <- assoc[model=='user_sent']$V1
ov <- assoc[model=="our_sent"]$V1
(ov-uv)/uv
sent
uv <- sent[model=='user_sent']$V1
ov <- sent[model=="our_sent"]$V1
(ov-uv)/uv
sent
uv <- sent[model=='u_sent']$V1
ov <- sent[model=="our_sent"]$V1
(ov-uv)/uv
epa_dat[name=='thot']
epa_dat[, (e+1.109119)^2+(p+0.1209487)^2+(a+0.6717589)^2,]
epa_dat[, (e+1.109119)^2+(p+0.1209487)^2+(a+0.6717589)^2,by="name"]
arrange(epa_dat[, (e+1.109119)^2+(p+0.1209487)^2+(a+0.6717589)^2,by="name"])
arrange(epa_dat[, (e+1.109119)^2+(p+0.1209487)^2+(a+0.6717589)^2,by="name"],V1)
arrange(sentdf[& epa == 'e'],-abs(scale(mu)-scale(mu0)))
arrange(sentdf[epa == 'e'],-abs(scale(mu)-scale(mu0)))
arrange(sentdf[epa == 'e'],-abs(scale(mu)-scale(mu0)))[1:10]
mu*mu0 < 0
arrange(sentdf[mu*mu0 < 0 & epa == 'e'],-abs(scale(mu)-scale(mu0)))
arrange(sentdf[mu*mu0 < 0 & epa == 'e'],-abs(mu-mu0))
sentdf[name %in% c("protester","protestor","police", "cop", "police officer")]
sentdf[name %in% c("protester","protestor","police", "cop", "police officer") & epa == 'e']
sentdf[name %in% c("protester","police", "cop", "police officer") & epa == 'e']
sentdf[name %in% c("protester","police", "cop", "police officer") & epa == 'p']
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) + facet_wrap(~epa)
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) +geom_text()+ facet_wrap(~epa)
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) +geom_text()+ facet_wrap(~epa,scales='free')
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) +geom_text_repel()+ facet_wrap(~epa,scales='free')
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) +geom_text_repel()+ facet_wrap(~epa,scales='free') + geom_abline(slope=1)
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) +geom_text_repel()+ facet_wrap(~epa) + geom_abline(slope=1) + scale_x_continuous(limits=c(-2,2))+ scale_y_continuous(limits=c(-2,2))
ggplot(sentdf[name %in% c("protester","police", "cop", "police officer")], aes(mu,mu0, label=name)) +geom_text_repel()+ facet_wrap(~epa) + geom_abline(slope=1) + scale_x_continuous(limits=c(-2,2))+ scale_y_continuous(limits=c(-2,2)) + geom_point()
sentdf[name %in% c("protester","police", "cop", "police officer") & epa == 'p']
sentdf[name %in% c("protester","police", "cop", "police officer") & epa == 'e']
(.6003400+.4141822+.1557192)/3
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'p']$diff)
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'e']$diff)
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'p']$diff)
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'a']$diff)
sentdf[name %in% c("police", "cop", "police officer") & epa == 'a']
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'p']$diff)
mean(sentdf[name =='protester' & epa == 'p']$diff)
sentdf[name =='protester' & epa == 'p']$diff
sentdf[name =='protester' & epa == 'e']$diff
sentdf[name =='protester' & epa == 'p']$diff
sentdf[name =='protester' & epa == 'a']$diff
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'a']$diff)
sentdf[name %in% c("muslim","extremist","terrorist")]
sentdf<- data.table(sentdf)
library(huge)
library(dplyr)
library(tidyr)
library(reshape2)
library(data.table)
library(ggplot2)
library(RcppCNPy)
library(tidyr)
library(ggiraph)
library(Hmisc)
library(ggrepel)
library(stringr)
library(fields)
library(scales)
sentdf<- data.table(sentdf)
sentdf[name %in% c("muslim","extremist","terrorist")]
arrange(sentdf[name %in% c("muslim","extremist","terrorist")],epa)
library(huge)
library(dplyr)
library(tidyr)
library(reshape2)
library(data.table)
library(ggplot2)
library(RcppCNPy)
library(tidyr)
library(ggiraph)
library(Hmisc)
library(ggrepel)
library(stringr)
library(fields)
library(scales)
results <- fread("NEWEST_RES/results.tsv",header=F,sep="\t")
setnames(results,c("iter","model","perpl","rank"))
results[rank == 0,mean(perpl),by="model"]
assoc <- results[rank == 0,mean(perpl),by="model"]
uv <- assoc[model=='user_assoc']$V1
ov <- assoc[model=="our_assoc"]$V1
(ov-uv)/uv
sent <- results[rank != 0,mean(rank),by="model"]
uv <- sent[model=='u_sent']$V1
ov <- sent[model=="our_sent"]$V1
(ov-uv)/uv
eta <- data.table(npyLoad("NEWEST_RES/900_assoc_eta.npy"))
phi <- data.table(npyLoad("NEWEST_RES/900_sent_phi.npy"))
assoc_mu <- data.table(npyLoad("NEWEST_RES/900_assoc_mu.npy"))
sent_mu <- data.table(npyLoad("NEWEST_RES/900_sent_mu.npy"))
sent_mu_0 <- data.table(npyLoad("NEWEST_RES/sent_mu_0.npy"))
sent_labels <- fread("NEWEST_RES/sent_ids_list.txt",header=F)
sent_labels$sent_index <- 1:nrow(sent_labels)
assoc_sig <- data.table(cov2cor(npyLoad("NEWEST_RES/900_assoc_sigma.npy")))
index_to_identity <- fread("NEWEST_RES/index_to_identity_final.tsv",header=F)
index_to_id <- fread("NEWEST_RES/index_to_id_final.tsv",header=F)
id_data <- merge(index_to_id,index_to_identity,by="V1")
setnames(id_data, c("index","id","name"))
sentdf <- data.table(mu=sent_mu$V1, mu0 = sent_mu_0$V1,label=sent_labels$V1,sent_ind=sent_labels$sent_index)
sentdf[,diff_abs:=abs(mu-mu0)]
sentdf[,diff:=mu-mu0]
sentdf$id <- sapply(sentdf$label, function(x){substr(x, 0, nchar(x)-1)})
sentdf$epa <-  sapply(sentdf$label, function(x){substr(x, nchar(x), nchar(x))})
sentdf <- merge(sentdf, id_data,by="id")
#sentdf$label <- NULL
sentdf <- arrange(sentdf,sent_ind)
sentdf$sent_name <- paste(sentdf$name, sentdf$epa,sep="_")
setnames(phi,sentdf$sent_name)
epa_dat <- spread(sentdf[,c("name","epa","mu"),with=F], epa, mu)
epa_dat$a_scale <- scale(epa_dat$a)
epa_dat$e_scale <- scale(epa_dat$e)
epa_dat$p_scale <- scale(epa_dat$p)
identities <- arrange(id_data,index)$name
setnames(eta, index_to_identity$V2)
##### FULL PAIRWISE DATA
colnames(assoc_sig) <- colnames(eta)
assoc_sig$name  <- colnames(eta)
m <- melt(assoc_sig,id="name")
m <- m[as.character(m$name) < as.character(m$variable)]
m <- merge(m,epa_dat[,c("name","e","p","a"),with=F],by.x="name",by.y="name")
setnames(m,c("e","p","a"),c("eN","pN","aN"))
m <- merge(m,epa_dat[,c("name","e","p","a"),with=F],by.x="variable",by.y="name")
setnames(m,c("e","p","a"),c("eV","pV","aV"))
m[,sent_diff := sqrt( (eN-eV)^2 + (pN-pV)^2+ (aN-aV)^2)] #
m[,sent_sim := 1/(1+sent_diff)]
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'e']$diff)
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'p']$diff)
mean(sentdf[name %in% c("police", "cop", "police officer") & epa == 'a']$diff)
sentdf[name =='protester' & epa == 'e']$diff
sentdf[name =='protester' & epa == 'p']$diff
sentdf[name =='protester' & epa == 'a']$diff
sentdf[name %in% c("police","cop","police officer","protester"),with=F]
sentdf[name %in% c("police","cop","police officer","protester")]
ggplot(sentdf[name %in% c("police","cop","police officer","protester")], aes(mu,mu0)) + geom_point()
ggplot(sentdf[name %in% c("police","cop","police officer","protester")], aes(mu,mu0)) + geom_point() + facet_wrap(~epa)
ggplot(sentdf[name %in% c("police","cop","police officer","protester")], aes(mu,mu0)) + geom_point() + facet_wrap(~epa) + geom_text()
ggplot(sentdf[name %in% c("police","cop","police officer","protester")], aes(mu,mu0,label=name)) + geom_point() + facet_wrap(~epa) + geom_text()
ggplot(sentdf[name %in% c("police","cop","police officer","protester")], aes(mu,mu0,label=name)) + geom_point() + facet_wrap(~epa) + geom_text() + geom_abline(slope=1)
k <- sentdf[name %in% c("police","cop","police officer","protester")]
k
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "p"], aes(mu,mu0,label=name)) + geom_point() + facet_wrap(~epa) + geom_text() + geom_abline(slope=1)
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(mu,mu0,label=name)) + geom_point() + facet_wrap(~epa) + geom_text() + geom_abline(slope=1)
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(mu,mu0,label=name)) + geom_point() + facet_wrap(~epa) + geom_text_repel() + geom_abline(slope=1)
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0)) + geom_bar(stat='identity') + facet_wrap(~epa) +
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0)) + geom_bar(stat='identity') + facet_wrap(~epa)
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0)) + geom_bar(stat='identity') + facet_wrap(~epa) + coord_flip()
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + coord_flip()
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y")
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0,color=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y")
ggplot(sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"], aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y")
q <- sentdf[name %in% c("police","cop","police officer","protester") & epa != "a"]
q$epa <- factor(q$epa, levels=c("e","p"),
labels=c("Evaluative","Potency"))
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + scale_color_discrete("",colors=c("blue","red"))
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + scale_color_discrete("")
ggplot(q, aes(name,mu-mu0)) + geom_bar(stat='identity',fill=mu-mu0 > 0) + facet_wrap(~epa,scales="free_y")
ggplot(q, aes(name,mu-mu0)) + geom_bar(stat='identity',fill=mu-mu0 > 0) + facet_wrap(~epa,scales="free_y")
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + scale_color_discrete("")
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none")
theme_set(theme_bw(20))
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none")
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none") + ylab("Change in value between")
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none") + ylab("Change in value between\nmodel estimate and survey data")
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none") + ylab("Change in value between\nmodel estimate and survey data") + xlab("")
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none") + ylab("Change in value between\nmodel estimate and survey data") + xlab("") + scale_color_discrete(c("red","blue"))
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none") + ylab("Change in value between\nmodel estimate and survey data") + xlab("") + scale_fill_manual(c("red","blue"))
ggplot(q, aes(name,mu-mu0,fill=mu-mu0 > 0)) + geom_bar(stat='identity') + facet_wrap(~epa,scales="free_y") + theme(legend.position="none") + ylab("Change in value between\nmodel estimate and survey data") + xlab("") + scale_fill_manual(values=c("red","blue"))
library(data.table)
library(ggplot2)
d <- fread("~/Dropbox/Kenny/acl_paper/All Measures-nodeset-Agent.csv")
d
names(d)
d2 <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv")
d
d2
high_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv")
low_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv")
high_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv")
low_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv")
high_news
high_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv")
high_news$typev <- "High Stability, News data"
low_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv")
low_news$typev <- "Low Stability, News data"
high_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv")
high_twitter$typev <- "High Stability, Twitter data"
low_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv")
low_twitter$typev <- "Low Stability, Twitter data"
high_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv",header=F)
high_news$typev <- "High Stability, News data"
low_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv",header=F)
low_news$typev <- "Low Stability, News data"
high_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv",header=F)
high_twitter$typev <- "High Stability, Twitter data"
low_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv",header=F)
low_twitter$typev <- "Low Stability, Twitter data"
data <- rbind(high_news,low_news,high_twitter,low_twitter)
data
data[grepl(V1,"density")]
data[grepl("density",V1)]
data[grepl("solate",V1)]
data
high_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv")
high_news$typev <- "High Stability, News data"
low_news <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv")
low_news$typev <- "Low Stability, News data"
high_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv")
high_twitter$typev <- "High Stability, Twitter data"
low_twitter <- fread("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv")
low_twitter$typev <- "Low Stability, Twitter data"
low_twitter
library(stringr)
substr(high_news$`Measure-Key`,0,-2)
substr(high_news$`Measure-Key`,0,2)
str_sub(high_news$`Measure-Key`,0,-3)
high_news$`Measure-Key` <- str_sub(high_news$`Measure-Key`,0,-3)
high_news
high_news$V3 <- NULL
setnames(high_news) <- c("Measure","Value","typev")
setnames(high_news,c("Measure","Value","typev"))
high_news[,mean(Value),by="Measure"]
get_dat <- function(filename){
dat <- fread(filename)
dat$typev <- "High Stability, News data"
dat$`Measure-Key` <- str_sub(dat$`Measure-Key`,0,-3)
dat$V3 <- NULL
setnames(dat,c("Measure","Value","typev"))
dat <- dat[,mean(Value),by="Measure"]
return(dat)
}
dat <- rbind(get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv"))
dat
get_dat <- function(filename,name){
dat <- fread(filename)
dat$typev <- "High Stability, News data"
dat$`Measure-Key` <- str_sub(dat$`Measure-Key`,0,-3)
dat$V3 <- NULL
dat$typev <- name
setnames(dat,c("Measure","Value","typev"))
dat <- dat[,mean(Value),by="Measure"]
return(dat)
}
dat <- rbind(get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv",
"High Stability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv",
"Low Stability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv",
"High Stability, Twitter"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv",
"Low Stability, Twitter"))
dat
get_dat <- function(filename,name){
dat <- fread(filename)
dat$typev <- "High Stability, News data"
dat$`Measure-Key` <- str_sub(dat$`Measure-Key`,0,-3)
dat$V3 <- NULL
dat$typev <- name
setnames(dat,c("Measure","Value","typev"))
dat <- dat[,mean(Value),by="Measure"]
return(dat)
}
dat <- rbind(get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv",
"High Stability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv",
"Low Stability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv",
"High Stability, Twitter"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv",
"Low Stability, Twitter"))
dat
get_dat <- function(filename,name){
dat <- fread(filename)
dat$typev <- "High Stability, News data"
dat$`Measure-Key` <- str_sub(dat$`Measure-Key`,0,-3)
dat$V3 <- NULL
dat$typev <- name
setnames(dat,c("Measure","Value","typev"))
dat <- dat[,mean(Value),by=c("Measure","typev")]
return(dat)
}
dat <- rbind(get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv",
"High Stability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv",
"Low Stability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv",
"High Stability, Twitter"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv",
"Low Stability, Twitter"))
dat
library(tidyr)
spread(dat, Measure,V1)
dat <- spread(dat, Measure,V1)
ggplot(dat, aes(clusteringCoefficient,weightedDensity)) + geom_point()
ggplot(dat, aes(clusteringCoefficient,weightedDensity,label=typev)) + geom_point() + geom_text()
ggplot(dat, aes(clusteringCoefficient,isolateCount,label=typev)) + geom_point() + geom_text()
d <- fread("~/Dropbox/Kenny/acl_paper/All Measures-nodeset-Agent.csv")
d
names(d)
sub("News/Twitter/Stability Similarity","",names(d))
sub("-News/Twitter/Stability Similarity","",names(d))
names(d) <- sub("-News/Twitter/Stability Similarity","",names(d))
d$`Node-Id`
arrange(d,totalDegreeCentrality-1)[:10]
arrange(d,totalDegreeCentrality-1)[1:10]
library(tidyr)
arrange(d,totalDegreeCentrality-1)[1:10]
??arrange
arrange(d,totalDegreeCentrality-1)[1:10]
library(dplyr)
arrange(d,totalDegreeCentrality-1)[1:10]
arrange(d,"totalDegreeCentrality-1")[1:10]
names(d) <- sub("-","",names(d))
arrange(d,totalDegreeCentrality1)[1:10]
arrange(d,totalDegreeCentrality1)[1:10]$NodeId
arrange(d,totalDegreeCentrality2)[1:10]$NodeId
arrange(d,totalDegreeCentrality3)[1:10]$NodeId
arrange(d,totalDegreeCentrality4)[1:10]$NodeId
arrange(d,-totalDegreeCentrality1)[1:10]$NodeId
arrange(d,-totalDegreeCentrality2)[1:10]$NodeId
arrange(d,-totalDegreeCentrality3)[1:10]$NodeId
arrange(d,-totalDegreeCentrality4)[1:10]$NodeId
dat
names(dat)
d
dat <- rbind(get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, News.csv",
"High Instability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, News.csv",
"Low Instability, News"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-High Stability, Twitter.csv",
"High Instability, Twitter"),
get_dat("~/Dropbox/Kenny/acl_paper/All Measures-network-Low Stability, Twitter.csv",
"Low Instability, Twitter"))
dat <- spread(dat, Measure,V1)
dat
dat$modularity <- .478
dat$typev
dat[typev =="High Instability, News"  ]$modularity <- .545
dat[typev == "Low Instability, Twitter"  ]$modularity <- .525
dat[typev == "High Instability, Twitter"  ]$modularity <- .586
ggplot(dat, aes(modularity,weightedDensity,label=typev)) + geom_point() + geom_text()
ggplot(dat, aes(typev,modularity)) + geom_bar(stat='identity') + coord_flip()
ggplot(dat, aes(typev,modularity)) + geom_point()+ coord_flip()
ggplot(dat, aes(typev,modularity)) + geom_point()
theme_set(theme_bw(20))
ggplot(dat, aes(typev,modularity)) + geom_point()
ggplot(dat, aes(typev,modularity)) + geom_point() + geom_line()
ggplot(dat, aes(typev,modularity)) + geom_point() + geom_line(group=1)
ggplot(dat, aes(typev,modularity)) + geom_point() + geom_line(group=1) + theme(axis.text.x=element_text(angle=45,hjust=1))
ggplot(dat, aes(typev,modularity)) + geom_point() + geom_line(group=1) + theme(axis.text.x=element_text(angle=45,hjust=1)) + ylab("Modularity") + xlab("Network")
.586-.525
.545-.478
library(data.table)
library(ggplot2)
theme_set(theme_bw(20))
list.files("random_split_output/")
?list.files
d <- lapply(list.files("random_split_output/",full.names=T), fread
d <- lapply(list.files("random_split_output/",full.names=T), fread)
d
d <- rbindlist(lapply(list.files("random_split_output/",full.names=T), fread))
d <- lapply(list.files("random_split_output/",full.names=T), fread)
d
range(4)
range(1,4)
1:4
d <- lapply(list.files("random_split_output/",full.names=T), fread)
dat <- data.frame()
for(i in 1:length(d)){
x <- d[[1]]
x$run <- i
dat <- rbind(dat,x)
}
dat
d[,v(.SD),by="run"]
v <- function(d){
v1 <- d[V2 == "our_assoc"]$V3
v2 <- d[V2 == "user_assoc"]$V3
return( abs(v1-v2)/v2)
}
d[,v(.SD),by="run"]
d
v <- function(x){
v1 <- x[V2 == "our_assoc"]$V3
v2 <- x[V2 == "user_assoc"]$V3
return( abs(v1-v2)/v2)
}
d[,v(.SD),by="run"]
v <- function(x){
print(x)
v1 <- x[V2 == "our_assoc"]$V3
v2 <- x[V2 == "user_assoc"]$V3
return( abs(v1-v2)/v2)
}
d[,v(.SD),by="run"]
d[,.SD,by="run"]
d
dat[,v(.SD),by="run"]
dat
dat[V2=='our_assoc']
dat <- data.frame()
for(i in 1:length(d)){
x <- d[[i]]
x$run <- i
dat <- rbind(dat,x)
}
v <- function(x){
print(x)
v1 <- x[V2 == "our_assoc"]$V3
v2 <- x[V2 == "user_assoc"]$V3
return( abs(v1-v2)/v2)
}
dat[,v(.SD),by="run"]
k <- function(x){
print(x)
v1 <- x[V2 == "our_sent"]$V4
v2 <- x[V2 == "user_sent"]$V4
return( abs(v1-v2)/v2)
}
dat[,k(.SD),by="run"]
k <- function(x){
print(x)
v1 <- x[V2 == "our_sent"]$V4
v2 <- x[V2 == "user_sent"]$V4
return( abs(v1-v2)/v2)
}
dat[,k(.SD),by="run"]
k <- function(x){
v1 <- x[V2 == "our_sent"]$V4
v2 <- x[V2 == "u_sent"]$V4
return( abs(v1-v2)/v2)
}
dat[,k(.SD),by="run"]
dat[,v(.SD),by="run"]
mean(dat[,v(.SD),by="run"]$V1)
v <- function(x){
v1 <- x[V2 == "our_assoc"]$V3
v2 <- x[V2 == "user_assoc"]$V3
return( abs(v1-v2)/v2)
}
k <- function(x){
v1 <- x[V2 == "our_sent"]$V4
v2 <- x[V2 == "u_sent"]$V4
return( abs(v1-v2)/v2)
}
dat[,v(.SD),by="run"]
mean(dat[,v(.SD),by="run"]$V1)
library(data.table)
library(ggplot2)
theme_set(theme_bw(20))
d <- lapply(list.files("random_split_output/",full.names=T), fread)
dat <- data.frame()
for(i in 1:length(d)){
x <- d[[i]]
x$run <- i
dat <- rbind(dat,x)
}
v <- function(x){
v1 <- x[V2 == "our_assoc"]$V3
v2 <- x[V2 == "user_assoc"]$V3
return( abs(v1-v2)/v2)
}
k <- function(x){
v1 <- x[V2 == "our_sent"]$V4
v2 <- x[V2 == "u_sent"]$V4
return( abs(v1-v2)/v2)
}
dat[,v(.SD),by="run"]
mean(dat[,v(.SD),by="run"]$V1)
dat[,k(.SD),by="run"]
mean(dat[,k(.SD),by="run"])
mean(dat[,k(.SD),by="run"]$V1)
